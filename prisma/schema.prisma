generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {

  id          String     @id @default(uuid())
  name        String
  saltAndHash String
  email       String     @unique
  images      Image[] @relation("UserImage")
  bornAt      DateTime?
  info        Info?  @relation("UserInfo")
  interests   Interest[] @relation("UserInterests")
  location    Location? @relation("UserLocation")

  @@map("user")
}

model Info {
  id          String    @id @default(uuid())
  languages   String[]
  location    Json
  age         Int       
  gender      String
  userId      String    @unique
  user        User      @relation("UserInfo", fields: [userId] , references: [id])

  @@map("info")
}

model Interest {

  id    String @id @default(uuid())
  name  String
  Users User[] @relation("UserInterests")

  @@map("interest")
}

model Location {
  id         String @id @default(uuid())
  address    String
  lat        Float
  lon        Float
  userId     String @unique
  user       User   @relation("UserLocation", fields: [userId] , references: [id], onDelete: Cascade)

  @@map("location")
}
model Image {
  id         String @id @default(uuid())
  imageData  Bytes
  userId     String @unique
  user       User   @relation("UserImage", fields: [userId] , references: [id], onDelete: Cascade)
}