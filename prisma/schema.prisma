generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {

  id          String     @id @default(uuid())
  name        String
  saltAndHash String
  email       String     @unique
  images      String[]
  info        Info?  @relation("UserInfo")
  interests   Interest[] @relation("UserInterests")
  conversations   Conversation[] @relation("UserConversations")
  messages    Message[]

  @@map("user")
}


model Conversation {

  id    String @id @default(uuid())
  createdAt    DateTime @default(now())
  participant   User[] @relation("UserConversations")
  messages   Message[]

  @@map("conversation")
}


model Message {

  id    String @id @default(uuid())
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  content     String
  conversation    Conversation @relation(fields: [conversationId], references: [id])
  conversationId    String
  author   User @relation(fields: [authorId], references: [id])
  authorId   String

  @@map("message") 
}


model Info {
  id          String    @id @default(uuid())
  languages   String[]
  location    Json
  age         Int
  gender      String
  userId      String    @unique
  user        User      @relation("UserInfo", fields: [userId] , references: [id])

  @@map("info")
}

model Interest {

  id    String @id @default(uuid())
  name  String
  Users User[] @relation("UserInterests")

  @@map("interest")
}


